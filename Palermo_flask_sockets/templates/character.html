{% extends "layout.html" %}


{% block content %}
<center>
<div class = "content-section">

   
{% if state == "Discussion" %}    
{% if flg == True %}
<script>
        
        
        var now = new Date().getTime();
        var countDownDate = now + 30000;
        localStorage.setItem("countTo",countDownDate);

</script>
{% endif %}

<script>
        // Update the count down every 1 second
        var x = setInterval(function() {
        
          // Get todays date and time
          var now = new Date().getTime();
          var countDownDate = localStorage.getItem("countTo");
          
          // Find the distance between now and the count down date
          var distance = countDownDate - now;
          
          // Time calculations for days, hours, minutes and seconds
          var days = Math.floor(distance / (1000 * 60 * 60 * 24));
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
          // Display the result in the element with id="demo"
          document.getElementById("demo").innerHTML = days + "d " + hours + "h "
          + minutes + "m " + seconds + "s ";
        
          // If the count down is finished, write some text 
          if (distance < 0) {
            clearInterval(x);
            document.getElementById("demo").innerHTML = "EXPIRED";
          }
        }, 1000);
        
</script>
{% endif %}

{% if state == "Voting" %}
    <form method="POST" action ="">
        {{ form_vote.hidden_tag() }}
        <fieldset class = "form-group">
            <legend class = border-bottom mb-4>{% block role %}{% endblock %}</legend>
            <div class="form-group">
                {{ form_vote.select(class = "form-control form-control-lg") }}
                

            </div>
            <div class="form-group">
                    <p id="demo"></p>
                    
                    {% if flg == True %}
                    <script>
                            
                            
                            var now = new Date().getTime();
                            var countDownDate = now + 30000;
                            localStorage.setItem("countTo",countDownDate);

                    </script>
                    {% endif %}
                    <form method = "post" id = "dummyform">
                            
                    </form>
                    <script>
                            // Update the count down every 1 second
                            var x = setInterval(function() {
                            
                              // Get todays date and time
                              var now = new Date().getTime();
                              var countDownDate = localStorage.getItem("countTo");
                              
                              // Find the distance between now and the count down date
                              var distance = countDownDate - now;
                              
                              // Time calculations for days, hours, minutes and seconds
                              var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                              var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                              var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                              var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                            
                              // Display the result in the element with id="demo"
                              document.getElementById("demo").innerHTML = days + "d " + hours + "h "
                              + minutes + "m " + seconds + "s ";
                            
                              // If the count down is finished, write some text 
                              if (distance < 0) {
                                clearInterval(x);
                                document.getElementById("demo").innerHTML = "EXPIRED";
                                document.getElementById("dummyform").submit();
                              }
                            }, 1000);
                            
                            </script>

                    {{ form_vote.submit(class = "btn btn-outline-info") }}
                </div>    
        </fieldset>

    </form>
{% endif %}
</div>
</center>

{% endblock content %}